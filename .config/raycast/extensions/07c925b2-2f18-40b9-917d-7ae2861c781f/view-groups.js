"use strict";var f=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var N=(e,o)=>{for(var i in o)f(e,i,{get:o[i],enumerable:!0})},C=(e,o,i,a)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of A(o))!y.call(e,r)&&r!==i&&f(e,r,{get:()=>o[r],enumerable:!(a=O(o,r))||a.enumerable});return e};var I=e=>C(f({},"__esModule",{value:!0}),e);var D={};N(D,{default:()=>S});module.exports=I(D);var L=require("react"),t=require("@raycast/api");var g=require("react"),p=require("@raycast/api");var l=p.Icon,m=async(e,o)=>{await p.LocalStorage.setItem(e,JSON.stringify(o))},d=async e=>{let o=await p.LocalStorage.getItem(e),i=typeof o>"u"?"":o;return i==""?[]:JSON.parse(i)};var P=()=>{let[e,o]=(0,g.useState)();return(0,g.useEffect)(()=>{Promise.resolve(d("localGroups")).then(i=>{o(i)})},[]),[e,o]};var s=require("react/jsx-runtime"),_=async(e,o,i,a,r)=>{let c=(await d("localGroups")).map(u=>u.id==e.id?{name:o,icon:i,id:e.id}:u),w=(await d("localPins")).map(u=>u.group==e.name?{name:u.name,url:u.url,icon:u.icon,group:o,id:u.id}:u);r(c),await m("localGroups",c),await m("localPins",w),await(0,t.showToast)({title:"Updated pin group!"}),a()},x=e=>{let o=e.group,i=e.setGroups,[a,r]=(0,L.useState)(),{pop:G}=(0,t.useNavigation)(),c=Object.keys(t.Icon);return c.unshift("None"),(0,s.jsxs)(t.Form,{actions:(0,s.jsx)(t.ActionPanel,{children:(0,s.jsx)(t.Action.SubmitForm,{icon:t.Icon.ChevronRight,onSubmit:n=>_(o,n.nameField,n.iconField,G,i)})}),children:[(0,s.jsx)(t.Form.TextField,{id:"nameField",title:"Group Name",placeholder:"Enter the group name",error:a,onChange:()=>a!==void 0?r(void 0):null,onBlur:n=>{n.target.value?.length==0?r("Name cannot be empty!"):a!==void 0&&r(void 0)},defaultValue:o.name}),(0,s.jsx)(t.Form.Dropdown,{id:"iconField",title:"Group Icon",defaultValue:o.icon,children:c.map(n=>(0,s.jsx)(t.Form.Dropdown.Item,{title:n,value:n,icon:n in l?l[n]:""},n))})]})},v=async(e,o)=>{if(await(0,t.confirmAlert)({title:"Are you sure?"})){let a=(await d("localGroups")).filter(n=>n.id!=e.id),r=a.filter(n=>n.name==e.name).length!=0,c=(await d("localPins")).map(n=>n.group==e.name&&!r?{name:n.name,url:n.url,icon:n.icon,group:"None",id:n.id}:n);o(a),await m("localGroups",a),await m("localPins",c),await(0,t.showToast)({title:"Removed pin group!"})}};function S(){let[e,o]=P(),{push:i}=(0,t.useNavigation)();return Object.keys(t.Icon).unshift("None"),(0,s.jsxs)(t.List,{isLoading:e===void 0,searchBarPlaceholder:"Search groups...",children:[(0,s.jsx)(t.List.EmptyView,{title:"No Groups Found",icon:"no-view.png"}),(e||[]).map(r=>(0,s.jsx)(t.List.Item,{title:r.name,icon:r.icon in l?l[r.icon]:"",actions:(0,s.jsxs)(t.ActionPanel,{children:[(0,s.jsx)(t.Action,{title:"Edit",icon:t.Icon.Pencil,onAction:()=>i((0,s.jsx)(x,{group:r,setGroups:o}))}),(0,s.jsx)(t.Action,{title:"Delete Group",icon:t.Icon.Trash,onAction:()=>{v(r,o),(0,t.clearSearchBar)()},style:t.Action.Style.Destructive})]})},r.id))]})}0&&(module.exports={});
